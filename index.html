<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>安娜AI：开始倾诉一切</title>
    <link rel="icon" href="icon.png" type="image/x-icon">
    <style>
        :root {
            --olive: #7b6c3a;
            --slate: #5f6f87;
            --blue: #2f6da5;
            --silver: #9fb2bd;
            --umber: #6a5232;
            --sand: #e7dc9c;
            --sage: #d6e1d4;
            --eggshell: #f4f3e3;
            --ivory: #f7f4dd;
            --outline: #cdd6e3;
            --text-primary: #2e3642;
            --text-secondary: #5d6470;
            --space-0-5: 6px;
            --space-1: 12px;
            --space-2: 24px;
            --space-3: 36px;
            --space-4: 48px;
            --space-5: 60px;
            --space-6: 72px;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--eggshell);
            color: var(--text-primary);
            display: flex;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
        }

        .page {
            width: min(1120px, 100% - clamp(var(--space-2), 8vw, var(--space-6)));
            padding-top: clamp(var(--space-2), 4vh, var(--space-4));
            /* padding-bottom removed to let flex layout handle it */
            display: flex;
            flex-direction: column;
            height: 100vh; /* Fallback */
            height: 100dvh;
            position: relative;
            margin: 0 auto;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: clamp(var(--space-1), 2vh, var(--space-3));
            flex-shrink: 0;
        }

        .logo {
            font-weight: 600;
            letter-spacing: 0.12em;
            color: var(--slate);
            text-transform: uppercase;
        }

        .badge {
            padding: var(--space-0-5) var(--space-1);
            border: 1px solid var(--slate);
            border-radius: 999px;
            font-size: 0.85rem;
            color: var(--slate);
        }

        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            /* justify-content: center; removed to allow scrolling from top if needed, or keep centered if content is small */
            justify-content: flex-start; 
            align-items: center;
            text-align: center;
            overflow-y: auto;
            padding-bottom: var(--space-2);
            /* Custom scrollbar hiding */
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none;  /* IE 10+ */
            
            /* Smooth fading at the top */
            -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 40px, black calc(100% - 20px), transparent 100%);
            mask-image: linear-gradient(to bottom, transparent 0%, black 40px, black calc(100% - 20px), transparent 100%);
        }
        
        main::-webkit-scrollbar { 
            display: none;  /* Chrome Safari */
        }

        .hero {
            max-width: 720px;
            display: flex;
            flex-direction: column;
            gap: var(--space-1);
            margin-top: auto;
            margin-bottom: auto;
        }

        .eyebrow {
            margin: 0;
            letter-spacing: 0.4em;
            font-size: 0.85rem;
            color: var(--slate);
        }

        .hero-title {
            margin: 0;
            font-size: clamp(2.8rem, 6vw, 3.6rem);
            letter-spacing: 0.08em;
        }

        .hero-desc {
            margin: 0 auto;
            max-width: 48ch;
            line-height: 1.8;
            color: var(--text-secondary);
        }

        .hero-actions,
        .button-link {
            display: none;
        }

        .bottom-section {
            flex-shrink: 0;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-bottom: clamp(var(--space-2), 4vh, var(--space-4));
            background: linear-gradient(to top, var(--eggshell) 90%, rgba(244, 243, 227, 0));
            z-index: 10;
        }

        .talk-box {
            position: relative;
            width: min(600px, 100%);
            display: flex;
            align-items: center;
            gap: var(--space-1);
            background: #fff;
            border-radius: 24px; /* Slightly less rounded for a modern look, or keep pill */
            border-radius: 999px;
            border: 1px solid rgba(47, 109, 165, 0.15);
            padding: 8px 8px 8px 24px;
            box-shadow: 
                0 4px 20px rgba(47, 109, 165, 0.06),
                0 1px 3px rgba(0, 0, 0, 0.02);
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .talk-box:focus-within {
            transform: translateY(-2px);
            box-shadow: 
                0 12px 32px rgba(47, 109, 165, 0.12),
                0 2px 8px rgba(47, 109, 165, 0.04);
            border-color: rgba(47, 109, 165, 0.3);
        }

        .talk-input {
            flex: 1;
            border: none;
            background: transparent;
            font-size: 1.05rem;
            color: var(--text-primary);
            font-family: inherit;
            padding: 8px 0;
        }

        .talk-input:focus {
            outline: none;
        }

        .talk-input::placeholder {
            color: var(--text-secondary);
            opacity: 0.6;
        }

        .talk-button {
            border: none;
            border-radius: 999px;
            background: var(--blue);
            color: #fff;
            font-weight: 600;
            padding: 12px 28px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
            flex-shrink: 0;
        }

        .talk-button:hover,
        .talk-button:focus-visible {
            background-color: #295985;
            outline: none;
        }
        
        .talk-button:active {
            transform: scale(0.96);
        }

        .dialog-gallery {
            width: min(960px, 100%);
            display: flex;
            justify-content: center;
            /* margin-top: auto; removed to allow better flow */
            margin-bottom: var(--space-2);
        }

        .dialog-stage {
            width: 100%;
            /* min-height removed to let it grow naturally */
            display: flex;
            flex-direction: column;
            gap: var(--space-1);
            justify-content: flex-end; /* Bubbles start from bottom if space allows */
            padding-block: var(--space-1);
            transition: transform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.8s ease;
        }

        .dialog-stage.exit {
            transform: translateY(-100vh); /* Move up off screen */
            opacity: 0;
        }

        .real-chat {
            width: 100%;
            display: none; /* Hidden by default */
            flex-direction: column;
            gap: var(--space-2);
            padding-top: var(--space-2);
        }

        .real-chat.active {
            display: flex;
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .flow-lines {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: var(--space-2); /* Increased gap for better readability */
        }

        .bubble {
            max-width: 85%;
            padding: 16px 24px;
            border-radius: 24px;
            line-height: 1.6;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s cubic-bezier(0.2, 0.8, 0.2, 1), transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
            background: #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.02);
            font-size: 1.05rem;
        }

        .bubble--visible {
            opacity: 1;
            transform: translateY(0);
        }

        .bubble--user {
            align-self: flex-end;
            background: var(--blue);
            color: #fff;
            margin-left: auto;
            text-align: right;
            border-bottom-right-radius: 4px;
        }

        .bubble--anna {
            align-self: flex-start;
            background: #fff;
            color: var(--text-primary);
            margin-right: auto;
            text-align: left;
            border-bottom-left-radius: 4px;
            border: 1px solid var(--outline);
        }

        footer {
            width: min(720px, 100%);
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-top: var(--space-2);
            opacity: 0.8;
            line-height: 1.5;
        }

        @media (max-width: 720px) {
            .page {
                width: 100%;
                padding: clamp(var(--space-2), 2vh, var(--space-3));
                padding-bottom: 0; /* Reset */
            }

            header {
                margin-bottom: var(--space-2);
            }

            .bottom-section {
                padding-bottom: var(--space-2);
            }

            .talk-box {
                width: 100%;
                /* On mobile, keep it row to save vertical space, or column if needed */
                /* Let's try row for mobile too for compactness */
                padding: 6px 6px 6px 16px;
            }

            .talk-input {
                font-size: 16px; /* Prevent zoom on iOS */
            }

            .talk-button {
                padding: 10px 20px;
                font-size: 0.95rem;
            }

            .bubble {
                max-width: 90%;
                padding: 14px 18px;
                font-size: 1rem;
            }
            
            footer {
                font-size: 0.75rem;
                padding: 0 var(--space-1);
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0,0,0,0);
            border: 0;
        }
    </style>
</head>
<body>
<div class="page">
    <header>
        <span class="logo">AnnaAI.app / 安娜Ai</span>
        <span class="badge">绝对保密</span>
    </header>

    <main>
        <section class="dialog-gallery" aria-label="Anna 的对话案例">
            <div class="dialog-stage" id="demo-stage" aria-live="polite">
                <div class="flow-lines" id="flow-lines"></div>
            </div>
            <div class="real-chat" id="real-chat" aria-live="polite"></div>
        </section>
    </main>

    <div class="bottom-section">
        <form class="talk-box" id="talk-form" onsubmit="return false;">
            <label for="talk-input" class="sr-only">向 Anna 倾诉</label>
            <input id="talk-input" class="talk-input" type="text" placeholder="开始倾诉一切">
            <button type="submit" class="talk-button">发送</button>
        </form>

        <footer>
            AnnaAI.app 不需要登录，不记录任何用户数据。安全感源自每一次被理解的瞬间。
        </footer>
    </div>
</div>

<script>
(function(){
    const talkForm = document.getElementById('talk-form');
    const talkInput = document.getElementById('talk-input');
    const demoStage = document.getElementById('demo-stage');
    const realChat = document.getElementById('real-chat');
    const mainEl = document.querySelector('main');
    
    let isChatStarted = false;

    // 简单的 Mock API 回复
    function mockApiReply(text) {
        return new Promise((resolve) => {
            setTimeout(() => {
                resolve(`Anna：我听到了你的声音，“${text}”。这似乎对你很重要。能多跟我说说这种感觉吗？我们一起看看背后藏着什么。`);
            }, 1500); // 模拟网络延迟
        });
    }

    function createChatBubble(text, isUser) {
        const bubble = document.createElement('div');
        bubble.className = `bubble ${isUser ? 'bubble--user' : 'bubble--anna'} bubble--visible`;
        bubble.textContent = text;
        return bubble;
    }

    function scrollToBottom() {
        // 滚动到底部
        mainEl.scrollTop = mainEl.scrollHeight;
    }

    async function handleSend() {
        const text = talkInput.value.trim();
        if (!text) return;

        // 清空输入框
        talkInput.value = '';
        talkInput.blur(); // 收起键盘/焦点，或者保持焦点看需求，这里先保持流畅暂不blur? 还是blur好？
        // 保持焦点体验更好
        talkInput.focus();

        if (!isChatStarted) {
            isChatStarted = true;
            // 1. 隐藏 Demo
            demoStage.classList.add('exit');
            
            // 2. 显示真实聊天区域
            // 等待一小会儿让动画开始
            setTimeout(() => {
                demoStage.style.display = 'none'; // 彻底移除占位
                realChat.classList.add('active');
            }, 600); 
        }

        // 添加用户消息
        const userBubble = createChatBubble(text, true);
        realChat.appendChild(userBubble);
        scrollToBottom();

        // 模拟 AI 思考/输入中 (可选: 加个 loading 气泡)
        // ...

        // 调用 Mock API
        try {
            const replyText = await mockApiReply(text);
            const aiBubble = createChatBubble(replyText, false);
            realChat.appendChild(aiBubble);
            scrollToBottom();
        } catch (e) {
            console.error(e);
        }
    }

    talkForm?.addEventListener('submit', (event) => {
        event.preventDefault();
        handleSend();
    });
})();

(function(){
    const flowLines = document.getElementById('flow-lines');
    if(!flowLines) return;

    const scenarios = [
        {
            user: '“我怕把真实想法告诉伴侣，会让关系更疏远。”',
            anna: 'Anna：害怕冲突通常代表你珍惜这段关系。我们可以把想说的话按安全程度排个顺序，只挑最安全的一句演练表达，你愿意试试吗？'
        },
        {
            user: '“工作像没有尽头，我常常忘记怎么放松。”',
            anna: 'Anna：别急着找完美答案。把一天拆成三个时段，用 0-3 记录能量，挑最低的那格塞进 10 分钟的卸压仪式，我们先让身体记住“可以停一下”。'
        },
        {
            user: '“越长大越觉得自己没什么价值，谁都可以取代我。”',
            anna: 'Anna：价值感来自一连串细小体验。写下这周你完成的三件真实小事，并记录它们对谁产生了作用，我们再一起把它们和你在乎的价值串起来。'
        }
    ];

    function wait(ms){ return new Promise(resolve => setTimeout(resolve, ms)); }

    function createBubble(role){
        const bubble = document.createElement('p');
        bubble.className = `bubble bubble--${role}`;
        bubble.textContent = '';
        flowLines.appendChild(bubble);
        requestAnimationFrame(() => bubble.classList.add('bubble--visible'));
        return bubble;
    }

    async function typeInto(element, text, speed = 40){
        element.textContent = '';
        for (const char of text){
            element.textContent += char;
            await wait(speed);
        }
    }

    async function playScenario(data){
        const userBubble = createBubble('user');
        await typeInto(userBubble, data.user);
        await wait(400);
        const annaBubble = createBubble('anna');
        await typeInto(annaBubble, data.anna);
        await wait(1400);
    }

    async function playAll(){
        for (const scenario of scenarios){
            await playScenario(scenario);
        }
    }

    playAll();
})();
</script>
</body>
</html>
